import { createContext, useContext, useState, useCallback, useEffect, ReactNode } from "react";

export type Language = "ar" | "en";

const translations = {
  ar: {
    // Navigation
    "nav.home": "الرئيسية",
    "nav.search": "البحث",
    "nav.map": "الخريطة",
    "map.title": "خريطة العقارات",
    "map.subtitle": "استكشف العقارات المتاحة على الخريطة",
    "map.filters": "الفلاتر",
    "map.noResults": "لا توجد عقارات بإحداثيات على الخريطة",
    "map.loading": "جاري تحميل الخريطة...",
    "map.properties": "عقارات",
    "map.viewDetails": "عرض التفاصيل",
    "map.perMonth": "ر.س / شهر",
    "map.allCities": "جميع المدن",
    "map.allTypes": "جميع الأنواع",
    "map.resetFilters": "إعادة ضبط",
    "map.showList": "عرض القائمة",
    "map.hideList": "إخفاء القائمة",
    "map.bedroom": "غرفة",
    "map.bedrooms": "غرف",
    "map.bathroom": "حمام",
    "map.sqm": "م²",
    "nav.properties": "العقارات",
    "nav.dashboard": "لوحة التحكم",
    "nav.messages": "الرسائل",
    "nav.notifications": "الإشعارات",
    "nav.profile": "الملف الشخصي",
    "nav.login": "تسجيل الدخول",
    "nav.logout": "تسجيل الخروج",
    "nav.listProperty": "أضف عقارك",

    // Hero
    "hero.title": "ابحث عن سكنك الشهري المثالي",
    "hero.subtitle": "منصة المفتاح الشهري تربط المستأجرين بأفضل العقارات للإيجار الشهري في المملكة العربية السعودية",
    "hero.searchPlaceholder": "ابحث بالمدينة أو الحي...",
    "hero.cta": "ابدأ البحث",

    // Property types
    "type.apartment": "شقة",
    "type.villa": "فيلا",
    "type.studio": "استوديو",
    "type.duplex": "دوبلكس",
    "type.furnished_room": "غرفة مفروشة",
    "type.compound": "مجمع سكني",
    "type.hotel_apartment": "شقة فندقية",

    // Search & Filters
    "search.title": "البحث عن عقار",
    "search.city": "المدينة",
    "search.district": "الحي",
    "search.propertyType": "نوع العقار",
    "search.priceRange": "نطاق السعر",
    "search.minPrice": "الحد الأدنى",
    "search.maxPrice": "الحد الأعلى",
    "search.bedrooms": "غرف النوم",
    "search.bathrooms": "دورات المياه",
    "search.furnished": "مستوى التأثيث",
    "search.unfurnished": "غير مفروش",
    "search.semi_furnished": "شبه مفروش",
    "search.fully_furnished": "مفروش بالكامل",
    "search.results": "نتائج البحث",
    "search.noResults": "لا توجد نتائج",
    "search.filters": "الفلاتر",
    "search.clearFilters": "مسح الفلاتر",
    "search.saveSearch": "حفظ البحث",
    "search.sortBy": "ترتيب حسب",
    "search.gridView": "عرض شبكي",
    "search.listView": "عرض قائمة",

    // Property details
    "property.monthlyRent": "الإيجار الشهري",
    "property.securityDeposit": "مبلغ التأمين",
    "property.size": "المساحة",
    "property.floor": "الطابق",
    "property.yearBuilt": "سنة البناء",
    "property.amenities": "المرافق",
    "property.utilities": "الخدمات المشمولة",
    "property.houseRules": "قوانين السكن",
    "property.location": "الموقع",
    "property.availability": "التوفر",
    "property.reviews": "التقييمات",
    "property.contactLandlord": "تواصل مع المالك",
    "property.bookNow": "احجز الآن",
    "property.requestBooking": "طلب حجز",
    "property.addToFavorites": "أضف للمفضلة",
    "property.removeFromFavorites": "إزالة من المفضلة",
    "property.share": "مشاركة",
    "property.report": "إبلاغ",
    "property.verified": "موثق",
    "property.featured": "مميز",
    "property.perMonth": "/ شهر",
    "property.sqm": "م²",
    "property.photos": "الصور",
    "property.description": "الوصف",
    "property.details": "التفاصيل",

    // Booking
    "booking.title": "تفاصيل الحجز",
    "booking.moveIn": "تاريخ الدخول",
    "booking.moveOut": "تاريخ الخروج",
    "booking.duration": "مدة الإيجار",
    "booking.months": "أشهر",
    "booking.totalCost": "التكلفة الإجمالية",
    "booking.confirm": "تأكيد الحجز",
    "booking.cancel": "إلغاء",
    "booking.pending": "قيد الانتظار",
    "booking.approved": "مقبول",
    "booking.rejected": "مرفوض",
    "booking.active": "نشط",
    "booking.completed": "مكتمل",
    "booking.cancelled": "ملغي",
    "booking.notes": "ملاحظات",

    // Dashboard
    "dashboard.tenant": "لوحة تحكم المستأجر",
    "dashboard.landlord": "لوحة تحكم المالك",
    "dashboard.admin": "لوحة تحكم المشرف",
    "dashboard.overview": "نظرة عامة",
    "dashboard.myProperties": "عقاراتي",
    "dashboard.myBookings": "حجوزاتي",
    "dashboard.myPayments": "مدفوعاتي",
    "dashboard.myMessages": "رسائلي",
    "dashboard.maintenance": "طلبات الصيانة",
    "dashboard.favorites": "المفضلة",
    "dashboard.analytics": "التحليلات",
    "dashboard.settings": "الإعدادات",
    "dashboard.users": "المستخدمون",
    "dashboard.allProperties": "جميع العقارات",
    "dashboard.allBookings": "جميع الحجوزات",
    "dashboard.revenue": "الإيرادات",
    "dashboard.occupancy": "نسبة الإشغال",
    "dashboard.totalUsers": "إجمالي المستخدمين",
    "dashboard.activeListings": "العقارات النشطة",
    "dashboard.pendingApproval": "بانتظار الموافقة",

    // Maintenance
    "maintenance.title": "طلب صيانة",
    "maintenance.newRequest": "طلب صيانة جديد",
    "maintenance.category": "الفئة",
    "maintenance.priority": "الأولوية",
    "maintenance.status": "الحالة",
    "maintenance.description": "الوصف",
    "maintenance.photos": "الصور",
    "maintenance.submit": "إرسال الطلب",
    "maintenance.submitted": "تم الإرسال",
    "maintenance.acknowledged": "تم الاستلام",
    "maintenance.in_progress": "قيد التنفيذ",
    "maintenance.completed": "مكتمل",
    "maintenance.cancelled": "ملغي",
    "maintenance.low": "منخفضة",
    "maintenance.medium": "متوسطة",
    "maintenance.high": "عالية",
    "maintenance.emergency": "طارئة",
    "maintenance.plumbing": "سباكة",
    "maintenance.electrical": "كهرباء",
    "maintenance.hvac": "تكييف",
    "maintenance.appliance": "أجهزة",
    "maintenance.structural": "هيكلي",
    "maintenance.pest_control": "مكافحة حشرات",
    "maintenance.cleaning": "تنظيف",
    "maintenance.other": "أخرى",

    // Messages
    "messages.title": "الرسائل",
    "messages.newMessage": "رسالة جديدة",
    "messages.typeMessage": "اكتب رسالتك...",
    "messages.send": "إرسال",
    "messages.noConversations": "لا توجد محادثات",

    // Payments
    "payment.title": "المدفوعات",
    "payment.rent": "إيجار",
    "payment.deposit": "تأمين",
    "payment.serviceFee": "رسوم خدمة",
    "payment.refund": "استرداد",
    "payment.pay": "ادفع الآن",
    "payment.history": "سجل المدفوعات",
    "payment.pending": "قيد الانتظار",
    "payment.completed": "مكتمل",
    "payment.failed": "فشل",
    "payment.sar": "ر.س",

    // Common
    "common.save": "حفظ",
    "common.cancel": "إلغاء",
    "common.delete": "حذف",
    "common.edit": "تعديل",
    "common.create": "إنشاء",
    "common.submit": "إرسال",
    "common.loading": "جاري التحميل...",
    "common.error": "حدث خطأ",
    "common.success": "تم بنجاح",
    "common.confirm": "تأكيد",
    "common.back": "رجوع",
    "common.next": "التالي",
    "common.previous": "السابق",
    "common.viewAll": "عرض الكل",
    "common.viewDetails": "عرض التفاصيل",
    "common.noData": "لا توجد بيانات",
    "common.actions": "الإجراءات",
    "common.status": "الحالة",
    "common.date": "التاريخ",
    "common.amount": "المبلغ",
    "common.total": "الإجمالي",
    "common.comingSoon": "قريباً",
    "common.language": "اللغة",
    "common.arabic": "العربية",
    "common.english": "English",

    // Auth
    "auth.login": "تسجيل الدخول",
    "auth.register": "إنشاء حساب",
    "auth.userId": "معرف المستخدم",
    "auth.password": "كلمة المرور",
    "auth.confirmPassword": "تأكيد كلمة المرور",
    "auth.displayName": "اسم العرض",
    "auth.fullName": "الاسم الكامل",
    "auth.email": "البريد الإلكتروني",
    "auth.phone": "رقم الجوال",
    "auth.loginBtn": "دخول",
    "auth.registerBtn": "تسجيل",
    "auth.noAccount": "ليس لديك حساب؟",
    "auth.hasAccount": "لديك حساب بالفعل؟",
    "auth.createAccount": "أنشئ حساباً",
    "auth.loginHere": "سجل دخولك",
    "auth.invalidCredentials": "بيانات الدخول غير صحيحة",
    "auth.userIdExists": "معرف المستخدم موجود مسبقاً",
    "auth.passwordMismatch": "كلمات المرور غير متطابقة",
    "auth.passwordTooShort": "كلمة المرور يجب أن تكون 12 حرفاً على الأقل (حرف كبير + صغير + رقم + رمز خاص)",
    "auth.welcomeBack": "مرحباً بعودتك",
    "auth.joinUs": "انضم إلينا",
    "auth.loginSubtitle": "سجل دخولك للوصول إلى حسابك",
    "auth.registerSubtitle": "أنشئ حسابك للبدء في استخدام المنصة",
    "auth.step1": "إنشاء الحساب",
    "auth.step2": "تحقق الجوال",
    "auth.step3": "تحقق الإيميل",
    "auth.nextStep": "التالي",
    "auth.verifyPhone": "تحقق من رقم الجوال",
    "auth.verifyEmail": "تحقق من البريد الإلكتروني",
    "auth.otpSent": "تم إرسال رمز التحقق إلى",
    "auth.enterOtp": "أدخل رمز التحقق",
    "auth.resendOtp": "إعادة إرسال الرمز",
    "auth.resendIn": "إعادة الإرسال بعد",
    "auth.seconds": "ثانية",
    "auth.verifyBtn": "تحقق",
    "auth.otpExpired": "انتهت صلاحية الرمز. أعد الإرسال.",
    "auth.maxAttempts": "تم تجاوز الحد الأقصى للمحاولات",
    "auth.phoneExists": "رقم الجوال مسجل مسبقاً",
    "auth.emailExists": "البريد الإلكتروني مسجل مسبقاً",
    "auth.accountCreated": "تم إنشاء الحساب بنجاح",
    "auth.verificationComplete": "تم التحقق بنجاح! جاري تسجيل الدخول...",
    "auth.nameAr": "الاسم بالعربي",
    "auth.nameEn": "الاسم بالإنجليزي",

    // Footer
    "footer.about": "عن المفتاح الشهري",
    "footer.aboutText": "المفتاح الشهري هي المنصة الرائدة للتأجير الشهري في المملكة العربية السعودية",
    "footer.quickLinks": "روابط سريعة",
    "footer.support": "الدعم",
    "footer.contact": "اتصل بنا",
    "footer.terms": "الشروط والأحكام",
    "footer.privacy": "سياسة الخصوصية",
    "footer.faq": "الأسئلة الشائعة",
    "footer.rights": "جميع الحقوق محفوظة",

    // How it works
    "howItWorks.title": "كيف تعمل المنصة",
    "howItWorks.step1Title": "ابحث عن عقارك",
    "howItWorks.step1Desc": "تصفح مئات العقارات المتاحة للإيجار الشهري في جميع أنحاء المملكة",
    "howItWorks.step2Title": "احجز بسهولة",
    "howItWorks.step2Desc": "اختر العقار المناسب وقدم طلب الحجز أو احجز فوراً",
    "howItWorks.step3Title": "انتقل واستمتع",
    "howItWorks.step3Desc": "وقّع العقد إلكترونياً وادفع بأمان وانتقل إلى سكنك الجديد",

    // Cities
    "city.riyadh": "الرياض",
    "city.jeddah": "جدة",
    "city.dammam": "الدمام",
    "city.makkah": "مكة المكرمة",
    "city.madinah": "المدينة المنورة",
    "city.khobar": "الخبر",
    "city.tabuk": "تبوك",
    "city.abha": "أبها",

    // AI Assistant
    "ai.title": "المفتاح الشهري الذكي",
    "ai.subtitle": "مساعدك الذكي لكل ما يخص المفتاح الشهري",
    "ai.placeholder": "اكتب سؤالك هنا...",
    "ai.send": "إرسال",
    "ai.newChat": "محادثة جديدة",
    "ai.history": "المحادثات السابقة",
    "ai.thinking": "يفكر...",
    "ai.welcome": "مرحباً! أنا المساعد الذكي في المفتاح الشهري. كيف أقدر أساعدك اليوم؟",
    "ai.rateResponse": "قيّم الإجابة",
    "ai.rated": "شكراً لتقييمك!",
    "ai.error": "حدث خطأ، حاول مرة أخرى",
    "ai.deleteChat": "حذف المحادثة",
    "ai.noHistory": "لا توجد محادثات سابقة",
    "ai.knowledgeBase": "قاعدة المعرفة",
    "ai.addArticle": "إضافة مقال",
    "ai.editArticle": "تعديل المقال",
    "ai.category": "التصنيف",

    // Knowledge Base Management
    "kb.title": "إدارة قاعدة المعرفة",
    "kb.subtitle": "إدارة المقالات والأسئلة الشائعة للمفتاح الشهري الذكي",
    "kb.addArticle": "إضافة مقال جديد",
    "kb.editArticle": "تعديل المقال",
    "kb.deleteArticle": "حذف المقال",
    "kb.deleteConfirm": "هل أنت متأكد من حذف هذا المقال؟ لا يمكن التراجع عن هذا الإجراء.",
    "kb.titleAr": "العنوان (عربي)",
    "kb.titleEn": "العنوان (إنجليزي)",
    "kb.contentAr": "المحتوى (عربي)",
    "kb.contentEn": "المحتوى (إنجليزي)",
    "kb.category": "التصنيف",
    "kb.tags": "الوسوم",
    "kb.tagsPlaceholder": "أدخل الوسوم مفصولة بفواصل",
    "kb.status": "الحالة",
    "kb.active": "منشور",
    "kb.inactive": "مسودة",
    "kb.save": "حفظ",
    "kb.cancel": "إلغاء",
    "kb.created": "تم إنشاء المقال بنجاح",
    "kb.updated": "تم تحديث المقال بنجاح",
    "kb.deleted": "تم حذف المقال بنجاح",
    "kb.noArticles": "لا توجد مقالات بعد",
    "kb.searchArticles": "البحث في المقالات...",
    "kb.allCategories": "جميع التصنيفات",
    "kb.cat.general": "عام",
    "kb.cat.tenant_guide": "دليل المستأجر",
    "kb.cat.landlord_guide": "دليل المالك",
    "kb.cat.admin_guide": "دليل الإدارة",
    "kb.cat.faq": "أسئلة شائعة",
    "kb.cat.policy": "سياسات",
    "kb.cat.troubleshooting": "حل المشكلات",
    "kb.totalArticles": "إجمالي المقالات",
    "kb.publishedArticles": "مقالات منشورة",
    "kb.draftArticles": "مسودات",
    "kb.seedKB": "تحميل المقالات الافتراضية",
    "kb.seedSuccess": "تم تحميل المقالات الافتراضية بنجاح",

    // Admin Settings CMS
    "settings.title": "إعدادات المنصة",
    "settings.general": "عام",
    "settings.hero": "القسم الرئيسي",
    "settings.stats": "الإحصائيات",
    "settings.fees": "الرسوم والأسعار",
    "settings.footer": "التذييل",
    "settings.legal": "قانوني",
    "settings.social": "التواصل الاجتماعي",
    "settings.siteName": "اسم الموقع",
    "settings.siteDescription": "وصف الموقع",
    "settings.logo": "الشعار",
    "settings.favicon": "أيقونة الموقع",
    "settings.primaryColor": "اللون الرئيسي",
    "settings.accentColor": "اللون الثانوي",
    "settings.heroTitle": "عنوان القسم الرئيسي",
    "settings.heroSubtitle": "العنوان الفرعي",
    "settings.heroBgImage": "صورة الخلفية",
    "settings.properties": "العقارات",
    "settings.tenants": "المستأجرين",
    "settings.cities": "المدن",
    "settings.satisfaction": "رضا العملاء",
    "settings.serviceFee": "رسوم الخدمة (%)",
    "settings.minRent": "الحد الأدنى للإيجار",
    "settings.maxRent": "الحد الأقصى للإيجار",
    "settings.depositMonths": "أشهر التأمين",
    "settings.vatPercent": "ضريبة القيمة المضافة (%)",
    "settings.aboutText": "نص عن المنصة",
    "settings.email": "البريد الإلكتروني",
    "settings.phone": "رقم الهاتف",
    "settings.address": "العنوان",
    "settings.terms": "شروط الاستخدام",
    "settings.privacy": "سياسة الخصوصية",
    "settings.save": "حفظ الإعدادات",
    "settings.saved": "تم حفظ الإعدادات بنجاح",
    "settings.seedDefaults": "تحميل الإعدادات الافتراضية",
    "settings.seeded": "تم تحميل الإعدادات الافتراضية",
    "settings.uploadLogo": "رفع الشعار",
    "settings.uploadFavicon": "رفع أيقونة الموقع",
    "settings.uploadBg": "رفع صورة الخلفية",
    "settings.arabic": "عربي",
    "settings.english": "إنجليزي",
    "settings.value": "القيمة",
    "settings.label": "التسمية",

    // Admin Permissions
    "perms.title": "صلاحيات المدراء",
    "perms.admin": "المدير",
    "perms.permissions": "الصلاحيات",
    "perms.rootAdmin": "مدير رئيسي",
    "perms.manageUsers": "إدارة المستخدمين",
    "perms.manageProperties": "إدارة العقارات",
    "perms.manageBookings": "إدارة الحجوزات",
    "perms.manageSettings": "إدارة الإعدادات",
    "perms.manageKB": "إدارة قاعدة المعرفة",
    "perms.viewAnalytics": "عرض التحليلات",
    "perms.managePayments": "إدارة المدفوعات",
    "perms.manageMaintenance": "إدارة الصيانة",
    "perms.save": "حفظ الصلاحيات",
    "perms.saved": "تم حفظ الصلاحيات بنجاح",
    "perms.cannotModifyRoot": "لا يمكن تعديل صلاحيات المدير الرئيسي",
    "perms.noAdmins": "لا يوجد مدراء بعد",

    // User Analytics
    "analytics.title": "تحليلات المستخدمين",
    "analytics.totalActions": "إجمالي الأنشطة",
    "analytics.uniqueUsers": "المستخدمين النشطين",
    "analytics.topActions": "أكثر الأنشطة",
    "analytics.recentActivity": "النشاط الأخير",
    "analytics.action": "النشاط",
    "analytics.count": "العدد",
    "analytics.user": "المستخدم",
    "analytics.page": "الصفحة",
    "analytics.time": "الوقت",
    "analytics.pageViews": "مشاهدات الصفحات",
    "analytics.searches": "عمليات البحث",
    "analytics.bookings": "الحجوزات",
    "analytics.messages": "الرسائل",

    // Districts
    "districts.title": "الأحياء",
    "districts.total": "إجمالي الأحياء",
    "districts.city": "المدينة",
    "districts.district": "الحي",
    "districts.allCities": "جميع المدن",

    // City & District Management
    "cityMgmt.title": "إدارة المدن والأحياء",
    "cityMgmt.subtitle": "إدارة المدن والأحياء المتاحة في المنصة مع إمكانية الإضافة والتعديل والتفعيل/التعطيل",
    "cityMgmt.citiesTab": "المدن",
    "cityMgmt.districtsTab": "الأحياء",
    "cityMgmt.addCity": "إضافة مدينة",
    "cityMgmt.editCity": "تعديل المدينة",
    "cityMgmt.deleteCity": "حذف المدينة",
    "cityMgmt.deleteCityConfirm": "هل أنت متأكد من حذف هذه المدينة؟ سيتم حذف جميع الأحياء المرتبطة بها.",
    "cityMgmt.addDistrict": "إضافة حي",
    "cityMgmt.editDistrict": "تعديل الحي",
    "cityMgmt.deleteDistrict": "حذف الحي",
    "cityMgmt.deleteDistrictConfirm": "هل أنت متأكد من حذف هذا الحي؟",
    "cityMgmt.nameAr": "الاسم (عربي)",
    "cityMgmt.nameEn": "الاسم (إنجليزي)",
    "cityMgmt.region": "المنطقة",
    "cityMgmt.regionAr": "المنطقة (عربي)",
    "cityMgmt.latitude": "خط العرض",
    "cityMgmt.longitude": "خط الطول",
    "cityMgmt.sortOrder": "ترتيب العرض",
    "cityMgmt.imageUrl": "رابط الصورة",
    "cityMgmt.status": "الحالة",
    "cityMgmt.active": "مفعل",
    "cityMgmt.inactive": "معطل",
    "cityMgmt.totalCities": "إجمالي المدن",
    "cityMgmt.activeCities": "مدن مفعلة",
    "cityMgmt.totalDistricts": "إجمالي الأحياء",
    "cityMgmt.activeDistricts": "أحياء مفعلة",
    "cityMgmt.selectCity": "اختر المدينة",
    "cityMgmt.allDistricts": "جميع الأحياء",
    "cityMgmt.noDistricts": "لا توجد أحياء لهذه المدينة",
    "cityMgmt.noCities": "لا توجد مدن بعد",
    "cityMgmt.cityCreated": "تم إضافة المدينة بنجاح",
    "cityMgmt.cityUpdated": "تم تحديث المدينة بنجاح",
    "cityMgmt.cityDeleted": "تم حذف المدينة بنجاح",
    "cityMgmt.cityToggled": "تم تغيير حالة المدينة بنجاح",
    "cityMgmt.districtCreated": "تم إضافة الحي بنجاح",
    "cityMgmt.districtUpdated": "تم تحديث الحي بنجاح",
    "cityMgmt.districtDeleted": "تم حذف الحي بنجاح",
    "cityMgmt.districtToggled": "تم تغيير حالة الحي بنجاح",
    "cityMgmt.save": "حفظ",
    "cityMgmt.cancel": "إلغاء",
    "cityMgmt.search": "بحث...",
    "cityMgmt.actions": "الإجراءات",
    "cityMgmt.belongsToCity": "تابع لمدينة",
    // Admin Sidebar Menu
    "adminMenu.dashboard": "لوحة التحكم",
    "adminMenu.properties": "إدارة العقارات",
    "adminMenu.submissions": "طلبات إضافة عقار",
    "adminMenu.buildings": "المباني والوحدات",
    "adminMenu.bookings": "الحجوزات",
    "adminMenu.payments": "المدفوعات والسجل المالي",
    "adminMenu.managers": "مديرو العقارات",
    "adminMenu.services": "إدارة الخدمات",
    "adminMenu.emergency": "طوارئ الصيانة",
    "adminMenu.analytics": "التحليلات",
    "adminMenu.cities": "المدن والأحياء",
    "adminMenu.permissions": "الصلاحيات والأدوار",
    "adminMenu.knowledgeBase": "قاعدة المعرفة",
    "adminMenu.whatsapp": "واتساب",
    "adminMenu.integrations": "التكاملات",
    "adminMenu.hardening": "تقوية الإنتاج",
    "adminMenu.dbStatus": "حالة قاعدة البيانات",
    "adminMenu.settings": "الإعدادات",
    "adminMenu.homepage": "الصفحة الرئيسية",
    "adminMenu.logout": "تسجيل الخروج",
    "adminMenu.sysAdmin": "مدير النظام",
    "adminMenu.landlord": "مالك عقار",
    "adminMenu.tenant": "مستأجر",
    "adminMenu.loginRequired": "يرجى تسجيل الدخول للمتابعة",
    "adminMenu.loginAccess": "الوصول إلى لوحة التحكم يتطلب تسجيل الدخول",
    "adminMenu.login": "تسجيل الدخول",
    "adminMenu.toggleMenu": "تبديل القائمة",
    "adminMenu.menu": "القائمة",
    "adminMenu.darkMode": "الوضع الداكن",
    "adminMenu.lightMode": "الوضع الفاتح",
    // Settings metadata
    "settings.loadedFromDb": "تم التحميل من قاعدة البيانات",
    "settings.lastSavedAt": "آخر حفظ في",
    "settings.dbSource": "مصدر البيانات: قاعدة البيانات",
    "settings.fieldsLoaded": "حقل محمّل",
    "settings.unsavedChanges": "تغييرات غير محفوظة",
  },
  en: {
    // Navigation
    "nav.home": "Home",
    "nav.search": "Search",
    "nav.map": "Map",
    "map.title": "Property Map",
    "map.subtitle": "Explore available properties on the map",
    "map.filters": "Filters",
    "map.noResults": "No properties with coordinates on the map",
    "map.loading": "Loading map...",
    "map.properties": "properties",
    "map.viewDetails": "View Details",
    "map.perMonth": "SAR / month",
    "map.allCities": "All Cities",
    "map.allTypes": "All Types",
    "map.resetFilters": "Reset",
    "map.showList": "Show List",
    "map.hideList": "Hide List",
    "map.bedroom": "bedroom",
    "map.bedrooms": "bedrooms",
    "map.bathroom": "bathroom",
    "map.sqm": "m\u00b2",
    "nav.properties": "Properties",
    "nav.dashboard": "Dashboard",
    "nav.messages": "Messages",
    "nav.notifications": "Notifications",
    "nav.profile": "Profile",
    "nav.login": "Sign In",
    "nav.logout": "Sign Out",
    "nav.listProperty": "List Your Property",

    // Hero
    "hero.title": "Find Your Perfect Monthly Rental",
    "hero.subtitle": "Ijar connects tenants with the best monthly rental properties across Saudi Arabia",
    "hero.searchPlaceholder": "Search by city or district...",
    "hero.cta": "Start Searching",

    // Property types
    "type.apartment": "Apartment",
    "type.villa": "Villa",
    "type.studio": "Studio",
    "type.duplex": "Duplex",
    "type.furnished_room": "Furnished Room",
    "type.compound": "Compound",
    "type.hotel_apartment": "Hotel Apartment",

    // Search & Filters
    "search.title": "Search Properties",
    "search.city": "City",
    "search.district": "District",
    "search.propertyType": "Property Type",
    "search.priceRange": "Price Range",
    "search.minPrice": "Min Price",
    "search.maxPrice": "Max Price",
    "search.bedrooms": "Bedrooms",
    "search.bathrooms": "Bathrooms",
    "search.furnished": "Furnished Level",
    "search.unfurnished": "Unfurnished",
    "search.semi_furnished": "Semi Furnished",
    "search.fully_furnished": "Fully Furnished",
    "search.results": "Search Results",
    "search.noResults": "No results found",
    "search.filters": "Filters",
    "search.clearFilters": "Clear Filters",
    "search.saveSearch": "Save Search",
    "search.sortBy": "Sort By",
    "search.gridView": "Grid View",
    "search.listView": "List View",

    // Property details
    "property.monthlyRent": "Monthly Rent",
    "property.securityDeposit": "Security Deposit",
    "property.size": "Size",
    "property.floor": "Floor",
    "property.yearBuilt": "Year Built",
    "property.amenities": "Amenities",
    "property.utilities": "Included Utilities",
    "property.houseRules": "House Rules",
    "property.location": "Location",
    "property.availability": "Availability",
    "property.reviews": "Reviews",
    "property.contactLandlord": "Contact Landlord",
    "property.bookNow": "Book Now",
    "property.requestBooking": "Request Booking",
    "property.addToFavorites": "Add to Favorites",
    "property.removeFromFavorites": "Remove from Favorites",
    "property.share": "Share",
    "property.report": "Report",
    "property.verified": "Verified",
    "property.featured": "Featured",
    "property.perMonth": "/ month",
    "property.sqm": "sqm",
    "property.photos": "Photos",
    "property.description": "Description",
    "property.details": "Details",

    // Booking
    "booking.title": "Booking Details",
    "booking.moveIn": "Move-in Date",
    "booking.moveOut": "Move-out Date",
    "booking.duration": "Lease Duration",
    "booking.months": "months",
    "booking.totalCost": "Total Cost",
    "booking.confirm": "Confirm Booking",
    "booking.cancel": "Cancel",
    "booking.pending": "Pending",
    "booking.approved": "Approved",
    "booking.rejected": "Rejected",
    "booking.active": "Active",
    "booking.completed": "Completed",
    "booking.cancelled": "Cancelled",
    "booking.notes": "Notes",

    // Dashboard
    "dashboard.tenant": "Tenant Dashboard",
    "dashboard.landlord": "Landlord Dashboard",
    "dashboard.admin": "Admin Dashboard",
    "dashboard.overview": "Overview",
    "dashboard.myProperties": "My Properties",
    "dashboard.myBookings": "My Bookings",
    "dashboard.myPayments": "My Payments",
    "dashboard.myMessages": "My Messages",
    "dashboard.maintenance": "Maintenance",
    "dashboard.favorites": "Favorites",
    "dashboard.analytics": "Analytics",
    "dashboard.settings": "Settings",
    "dashboard.users": "Users",
    "dashboard.allProperties": "All Properties",
    "dashboard.allBookings": "All Bookings",
    "dashboard.revenue": "Revenue",
    "dashboard.occupancy": "Occupancy",
    "dashboard.totalUsers": "Total Users",
    "dashboard.activeListings": "Active Listings",
    "dashboard.pendingApproval": "Pending Approval",

    // Maintenance
    "maintenance.title": "Maintenance Request",
    "maintenance.newRequest": "New Maintenance Request",
    "maintenance.category": "Category",
    "maintenance.priority": "Priority",
    "maintenance.status": "Status",
    "maintenance.description": "Description",
    "maintenance.photos": "Photos",
    "maintenance.submit": "Submit Request",
    "maintenance.submitted": "Submitted",
    "maintenance.acknowledged": "Acknowledged",
    "maintenance.in_progress": "In Progress",
    "maintenance.completed": "Completed",
    "maintenance.cancelled": "Cancelled",
    "maintenance.low": "Low",
    "maintenance.medium": "Medium",
    "maintenance.high": "High",
    "maintenance.emergency": "Emergency",
    "maintenance.plumbing": "Plumbing",
    "maintenance.electrical": "Electrical",
    "maintenance.hvac": "HVAC",
    "maintenance.appliance": "Appliance",
    "maintenance.structural": "Structural",
    "maintenance.pest_control": "Pest Control",
    "maintenance.cleaning": "Cleaning",
    "maintenance.other": "Other",

    // Messages
    "messages.title": "Messages",
    "messages.newMessage": "New Message",
    "messages.typeMessage": "Type your message...",
    "messages.send": "Send",
    "messages.noConversations": "No conversations yet",

    // Payments
    "payment.title": "Payments",
    "payment.rent": "Rent",
    "payment.deposit": "Deposit",
    "payment.serviceFee": "Service Fee",
    "payment.refund": "Refund",
    "payment.pay": "Pay Now",
    "payment.history": "Payment History",
    "payment.pending": "Pending",
    "payment.completed": "Completed",
    "payment.failed": "Failed",
    "payment.sar": "SAR",

    // Common
    "common.save": "Save",
    "common.cancel": "Cancel",
    "common.delete": "Delete",
    "common.edit": "Edit",
    "common.create": "Create",
    "common.submit": "Submit",
    "common.loading": "Loading...",
    "common.error": "An error occurred",
    "common.success": "Success",
    "common.confirm": "Confirm",
    "common.back": "Back",
    "common.next": "Next",
    "common.previous": "Previous",
    "common.viewAll": "View All",
    "common.viewDetails": "View Details",
    "common.noData": "No data available",
    "common.actions": "Actions",
    "common.status": "Status",
    "common.date": "Date",
    "common.amount": "Amount",
    "common.total": "Total",
    "common.comingSoon": "Coming Soon",
    "common.language": "Language",
    "common.arabic": "العربية",
    "common.english": "English",

    // Auth
    "auth.login": "Sign In",
    "auth.register": "Create Account",
    "auth.userId": "User ID",
    "auth.password": "Password",
    "auth.confirmPassword": "Confirm Password",
    "auth.displayName": "Display Name",
    "auth.fullName": "Full Name",
    "auth.email": "Email",
    "auth.phone": "Mobile Number",
    "auth.loginBtn": "Sign In",
    "auth.registerBtn": "Register",
    "auth.noAccount": "Don't have an account?",
    "auth.hasAccount": "Already have an account?",
    "auth.createAccount": "Create one",
    "auth.loginHere": "Sign in",
    "auth.invalidCredentials": "Invalid credentials",
    "auth.userIdExists": "User ID already exists",
    "auth.passwordMismatch": "Passwords do not match",
    "auth.passwordTooShort": "Password must be at least 12 characters (uppercase + lowercase + digit + special character)",
    "auth.welcomeBack": "Welcome Back",
    "auth.joinUs": "Join Us",
    "auth.loginSubtitle": "Sign in to access your account",
    "auth.registerSubtitle": "Create your account to get started",
    "auth.step1": "Create Account",
    "auth.step2": "Verify Phone",
    "auth.step3": "Verify Email",
    "auth.nextStep": "Next",
    "auth.verifyPhone": "Verify your phone number",
    "auth.verifyEmail": "Verify your email address",
    "auth.otpSent": "Verification code sent to",
    "auth.enterOtp": "Enter verification code",
    "auth.resendOtp": "Resend code",
    "auth.resendIn": "Resend in",
    "auth.seconds": "seconds",
    "auth.verifyBtn": "Verify",
    "auth.otpExpired": "Code expired. Please resend.",
    "auth.maxAttempts": "Maximum attempts exceeded",
    "auth.phoneExists": "Phone number already registered",
    "auth.emailExists": "Email already registered",
    "auth.accountCreated": "Account created successfully",
    "auth.verificationComplete": "Verification complete! Signing in...",
    "auth.nameAr": "Name (Arabic)",
    "auth.nameEn": "Name (English)",

    // Footer
    "footer.about": "عن المفتاح الشهري",
    "footer.aboutText": "المفتاح الشهري - المنصة الرائدة للتأجير الشهري في المملكة العربية السعودية",
    "footer.quickLinks": "Quick Links",
    "footer.support": "Support",
    "footer.contact": "Contact Us",
    "footer.terms": "Terms & Conditions",
    "footer.privacy": "Privacy Policy",
    "footer.faq": "FAQ",
    "footer.rights": "All rights reserved",

    // How it works
    "howItWorks.title": "How It Works",
    "howItWorks.step1Title": "Find Your Property",
    "howItWorks.step1Desc": "Browse hundreds of properties available for monthly rent across Saudi Arabia",
    "howItWorks.step2Title": "Book Easily",
    "howItWorks.step2Desc": "Choose the right property and submit a booking request or book instantly",
    "howItWorks.step3Title": "Move In & Enjoy",
    "howItWorks.step3Desc": "Sign the contract digitally, pay securely, and move into your new home",

    // Cities
    "city.riyadh": "Riyadh",
    "city.jeddah": "Jeddah",
    "city.dammam": "Dammam",
    "city.makkah": "Makkah",
    "city.madinah": "Madinah",
    "city.khobar": "Khobar",
    "city.tabuk": "Tabuk",
    "city.abha": "Abha",

    // AI Assistant
    "ai.title": "مساعد المفتاح الشهري",
    "ai.subtitle": "Your smart assistant for everything on the platform",
    "ai.placeholder": "Type your question here...",
    "ai.send": "Send",
    "ai.newChat": "New Chat",
    "ai.history": "Chat History",
    "ai.thinking": "Thinking...",
    "ai.welcome": "مرحباً! أنا مساعد المفتاح الشهري الذكي. كيف يمكنني مساعدتك اليوم؟",
    "ai.rateResponse": "Rate this response",
    "ai.rated": "Thanks for your rating!",
    "ai.error": "An error occurred, please try again",
    "ai.deleteChat": "Delete Chat",
    "ai.noHistory": "No previous conversations",
    "ai.knowledgeBase": "Knowledge Base",
    "ai.addArticle": "Add Article",
    "ai.editArticle": "Edit Article",
    "ai.category": "Category",

    // Knowledge Base Management
    "kb.title": "Knowledge Base Management",
    "kb.subtitle": "Manage articles and FAQs for the AI assistant",
    "kb.addArticle": "Add New Article",
    "kb.editArticle": "Edit Article",
    "kb.deleteArticle": "Delete Article",
    "kb.deleteConfirm": "Are you sure you want to delete this article? This action cannot be undone.",
    "kb.titleAr": "Title (Arabic)",
    "kb.titleEn": "Title (English)",
    "kb.contentAr": "Content (Arabic)",
    "kb.contentEn": "Content (English)",
    "kb.category": "Category",
    "kb.tags": "Tags",
    "kb.tagsPlaceholder": "Enter tags separated by commas",
    "kb.status": "Status",
    "kb.active": "Published",
    "kb.inactive": "Draft",
    "kb.save": "Save",
    "kb.cancel": "Cancel",
    "kb.created": "Article created successfully",
    "kb.updated": "Article updated successfully",
    "kb.deleted": "Article deleted successfully",
    "kb.noArticles": "No articles yet",
    "kb.searchArticles": "Search articles...",
    "kb.allCategories": "All Categories",
    "kb.cat.general": "General",
    "kb.cat.tenant_guide": "Tenant Guide",
    "kb.cat.landlord_guide": "Landlord Guide",
    "kb.cat.admin_guide": "Admin Guide",
    "kb.cat.faq": "FAQ",
    "kb.cat.policy": "Policies",
    "kb.cat.troubleshooting": "Troubleshooting",
    "kb.totalArticles": "Total Articles",
    "kb.publishedArticles": "Published",
    "kb.draftArticles": "Drafts",
    "kb.seedKB": "Load Default Articles",
    "kb.seedSuccess": "Default articles loaded successfully",

    // Admin Settings CMS
    "settings.title": "Platform Settings",
    "settings.general": "General",
    "settings.hero": "Hero Section",
    "settings.stats": "Statistics",
    "settings.fees": "Fees & Pricing",
    "settings.footer": "Footer",
    "settings.legal": "Legal",
    "settings.social": "Social Media",
    "settings.siteName": "Site Name",
    "settings.siteDescription": "Site Description",
    "settings.logo": "Logo",
    "settings.favicon": "Favicon",
    "settings.primaryColor": "Primary Color",
    "settings.accentColor": "Accent Color",
    "settings.heroTitle": "Hero Title",
    "settings.heroSubtitle": "Hero Subtitle",
    "settings.heroBgImage": "Background Image",
    "settings.properties": "Properties",
    "settings.tenants": "Tenants",
    "settings.cities": "Cities",
    "settings.satisfaction": "Customer Satisfaction",
    "settings.serviceFee": "Service Fee (%)",
    "settings.minRent": "Minimum Rent",
    "settings.maxRent": "Maximum Rent",
    "settings.depositMonths": "Deposit Months",
    "settings.vatPercent": "VAT (%)",
    "settings.aboutText": "About Text",
    "settings.email": "Email",
    "settings.phone": "Phone",
    "settings.address": "Address",
    "settings.terms": "Terms of Service",
    "settings.privacy": "Privacy Policy",
    "settings.save": "Save Settings",
    "settings.saved": "Settings saved successfully",
    "settings.seedDefaults": "Load Default Settings",
    "settings.seeded": "Default settings loaded",
    "settings.uploadLogo": "Upload Logo",
    "settings.uploadFavicon": "Upload Favicon",
    "settings.uploadBg": "Upload Background",
    "settings.arabic": "Arabic",
    "settings.english": "English",
    "settings.value": "Value",
    "settings.label": "Label",

    // Admin Permissions
    "perms.title": "Admin Permissions",
    "perms.admin": "Admin",
    "perms.permissions": "Permissions",
    "perms.rootAdmin": "Root Admin",
    "perms.manageUsers": "Manage Users",
    "perms.manageProperties": "Manage Properties",
    "perms.manageBookings": "Manage Bookings",
    "perms.manageSettings": "Manage Settings",
    "perms.manageKB": "Manage Knowledge Base",
    "perms.viewAnalytics": "View Analytics",
    "perms.managePayments": "Manage Payments",
    "perms.manageMaintenance": "Manage Maintenance",
    "perms.save": "Save Permissions",
    "perms.saved": "Permissions saved successfully",
    "perms.cannotModifyRoot": "Cannot modify root admin permissions",
    "perms.noAdmins": "No admins yet",

    // User Analytics
    "analytics.title": "User Analytics",
    "analytics.totalActions": "Total Actions",
    "analytics.uniqueUsers": "Active Users",
    "analytics.topActions": "Top Actions",
    "analytics.recentActivity": "Recent Activity",
    "analytics.action": "Action",
    "analytics.count": "Count",
    "analytics.user": "User",
    "analytics.page": "Page",
    "analytics.time": "Time",
    "analytics.pageViews": "Page Views",
    "analytics.searches": "Searches",
    "analytics.bookings": "Bookings",
    "analytics.messages": "Messages",

    // Districts
    "districts.title": "Districts",
    "districts.total": "Total Districts",
    "districts.city": "City",
    "districts.district": "District",
    "districts.allCities": "All Cities",

    // City & District Management
    "cityMgmt.title": "Cities & Districts Management",
    "cityMgmt.subtitle": "Manage cities and districts available on the platform with add, edit, and enable/disable options",
    "cityMgmt.citiesTab": "Cities",
    "cityMgmt.districtsTab": "Districts",
    "cityMgmt.addCity": "Add City",
    "cityMgmt.editCity": "Edit City",
    "cityMgmt.deleteCity": "Delete City",
    "cityMgmt.deleteCityConfirm": "Are you sure you want to delete this city? All associated districts will also be deleted.",
    "cityMgmt.addDistrict": "Add District",
    "cityMgmt.editDistrict": "Edit District",
    "cityMgmt.deleteDistrict": "Delete District",
    "cityMgmt.deleteDistrictConfirm": "Are you sure you want to delete this district?",
    "cityMgmt.nameAr": "Name (Arabic)",
    "cityMgmt.nameEn": "Name (English)",
    "cityMgmt.region": "Region",
    "cityMgmt.regionAr": "Region (Arabic)",
    "cityMgmt.latitude": "Latitude",
    "cityMgmt.longitude": "Longitude",
    "cityMgmt.sortOrder": "Sort Order",
    "cityMgmt.imageUrl": "Image URL",
    "cityMgmt.status": "Status",
    "cityMgmt.active": "Active",
    "cityMgmt.inactive": "Inactive",
    "cityMgmt.totalCities": "Total Cities",
    "cityMgmt.activeCities": "Active Cities",
    "cityMgmt.totalDistricts": "Total Districts",
    "cityMgmt.activeDistricts": "Active Districts",
    "cityMgmt.selectCity": "Select City",
    "cityMgmt.allDistricts": "All Districts",
    "cityMgmt.noDistricts": "No districts for this city",
    "cityMgmt.noCities": "No cities yet",
    "cityMgmt.cityCreated": "City added successfully",
    "cityMgmt.cityUpdated": "City updated successfully",
    "cityMgmt.cityDeleted": "City deleted successfully",
    "cityMgmt.cityToggled": "City status changed successfully",
    "cityMgmt.districtCreated": "District added successfully",
    "cityMgmt.districtUpdated": "District updated successfully",
    "cityMgmt.districtDeleted": "District deleted successfully",
    "cityMgmt.districtToggled": "District status changed successfully",
    "cityMgmt.save": "Save",
    "cityMgmt.cancel": "Cancel",
    "cityMgmt.search": "Search...",
    "cityMgmt.actions": "Actions",
    "cityMgmt.belongsToCity": "Belongs to city",
    // Admin Sidebar Menu
    "adminMenu.dashboard": "Dashboard",
    "adminMenu.properties": "Property Management",
    "adminMenu.submissions": "Property Submissions",
    "adminMenu.buildings": "Buildings & Units",
    "adminMenu.bookings": "Bookings",
    "adminMenu.payments": "Payments & Ledger",
    "adminMenu.managers": "Property Managers",
    "adminMenu.services": "Service Management",
    "adminMenu.emergency": "Maintenance Emergency",
    "adminMenu.analytics": "Analytics",
    "adminMenu.cities": "Cities & Districts",
    "adminMenu.permissions": "Permissions & Roles",
    "adminMenu.knowledgeBase": "Knowledge Base",
    "adminMenu.whatsapp": "WhatsApp",
    "adminMenu.integrations": "Integrations",
    "adminMenu.hardening": "Production Hardening",
    "adminMenu.dbStatus": "Database Status",
    "adminMenu.settings": "Settings",
    "adminMenu.homepage": "Homepage",
    "adminMenu.logout": "Sign Out",
    "adminMenu.sysAdmin": "System Admin",
    "adminMenu.landlord": "Landlord",
    "adminMenu.tenant": "Tenant",
    "adminMenu.loginRequired": "Please sign in to continue",
    "adminMenu.loginAccess": "Dashboard access requires authentication",
    "adminMenu.login": "Sign In",
    "adminMenu.toggleMenu": "Toggle Menu",
    "adminMenu.menu": "Menu",
    "adminMenu.darkMode": "Dark Mode",
    "adminMenu.lightMode": "Light Mode",
    // Settings metadata
    "settings.loadedFromDb": "Loaded from database",
    "settings.lastSavedAt": "Last saved at",
    "settings.dbSource": "Data source: Database",
    "settings.fieldsLoaded": "fields loaded",
    "settings.unsavedChanges": "Unsaved changes",
  },
} as const;

type TranslationKey = keyof typeof translations.ar;

interface I18nContextType {
  lang: Language;
  dir: "rtl" | "ltr";
  t: (key: TranslationKey) => string;
  setLang: (lang: Language) => void;
  toggleLang: () => void;
}

const I18nContext = createContext<I18nContextType | null>(null);

export function I18nProvider({ children }: { children: ReactNode }) {
  const [lang, setLangState] = useState<Language>(() => {
    const saved = localStorage.getItem("monthlykey-lang");
    return (saved === "en" ? "en" : "ar") as Language;
  });

  const dir = lang === "ar" ? "rtl" : "ltr";

  const setLang = useCallback((newLang: Language) => {
    setLangState(newLang);
    localStorage.setItem("monthlykey-lang", newLang);
    document.documentElement.lang = newLang;
    document.documentElement.dir = newLang === "ar" ? "rtl" : "ltr";
  }, []);

  const toggleLang = useCallback(() => {
    setLang(lang === "ar" ? "en" : "ar");
  }, [lang, setLang]);

  const t = useCallback((key: TranslationKey): string => {
    return (translations[lang] as any)[key] ?? key;
  }, [lang]);

  useEffect(() => {
    document.documentElement.lang = lang;
    document.documentElement.dir = dir;
  }, [lang, dir]);

  return (
    <I18nContext.Provider value={{ lang, dir, t, setLang, toggleLang }}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error("useI18n must be used within I18nProvider");
  return ctx;
}

export function useT() {
  return useI18n().t;
}
